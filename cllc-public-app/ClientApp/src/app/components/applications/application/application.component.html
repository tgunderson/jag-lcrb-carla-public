<ng-template #applicationContent>

  <div *ngIf="account?.businessType" [ngClass]="{'hide': mode === UPLOAD_FILES_MODE}">

    <div [formGroup]="form" style="padding-left: 45px; position: relative">
      <!-- Title -->
      <h1 class="ngtest-page-title">{{ htmlContent?.title }}</h1>
    </div>

    <div [formGroup]="form" class="application-wrapper">
      <!-- Preamble -->
      <section class="ngtest-preamble-content" [innerHTML]="htmlContent?.preamble"></section>

      <!-- Before Starting -->
      <h3 *ngIf="htmlContent?.beforeStarting" class="blue-header">BEFORE STARTING
        THE APPLICATION</h3>
      <section *ngIf="htmlContent?.beforeStarting" class="padded-section">
        <div class="ngtest-before-starting-content" [innerHTML]="htmlContent.beforeStarting"></div>
      </section>


      <!-- Property Details -->
      <section class="ngtest-property-details" *ngIf="application?.applicationType?.showPropertyDetails">
          <h3 class="blue-header">TYPE OF APPLICATION</h3>

          <mat-card class="mat-elevation-z8" style="margin-bottom: 10px;"
          *ngIf="application?.applicationType?.showPropertyDetails">

          <section style="width: 100%">
              <p><strong>Select the type of Liquor Primary You are Applying For:</strong></p>
          </section>

          <section style="display: flex; justify-content: space-between; width: 100%;">
              
              <mat-button-toggle-group  aria-label="Font Style">
                  <mat-button-toggle value="New Liquor Primary Club">New Liquor Primary Club</mat-button-toggle>
                  <mat-button-toggle value="New Liquor Primary">New Liquor Primary</mat-button-toggle>
                </mat-button-toggle-group>
          </section>

          <section style="width: 100%; font-size: 12px; padding:5px; font-weight:200;">
              <p><i><strong>New Liquor Primary Club:</strong><br>A society registered under the provincial Societies Act or  a non-profit or veterans organization incorporated by special act of parliament, may apply for an LP Club Licence. LP Clubs must have at least 50 members who pay annual fees. The service area of an LP Club is restricted to members and guests only.</i></p>            
              <p><i><strong>New Liquor Primary (LP):</strong><br>Motor vehicles, and businesses predominantly directed at minors, are prohibited from obtaining a liquor primary licence.</i></p>            
          </section>

          <div style="position: relative">
              <div [ngBusy]="busy"></div>
  
              <app-field
              [label]="'Identify the establishment type that best fits your proposed LP business:'"
              [required]="true">
              <select class="form-control" style="width: 500px;">
                  <option> </option>
                  <option>Aircraft</option>
                  <option>Airport Lounge Aquarium</option>
                  <option>Art Gallery B&B/Hotel Bingo Hall Brew Pub Casino</option>
                  <option>Community Centre Concert Hall Convention Centre Cooking School Cultural Centre Fishing Lodge</option>
                  <option>Golf Course Hair Salon</option>
                  <option>Live Theatre Lounge</option>
                  <option>Military Mess Movie Theatre Museum</option>
                  <option>Night Club/Cabaret Private Club</option>
                  <option>Public House (Pub)</option>
                  <option>Recreation Facility</option>
                  <option>Rental Hall</option>
                  <option>Resort</option>
                  <option>Retail Store (specify type) Spa</option>
                  <option>Stadium</option>
                  <option>Train Station University/College</option>
              </select>

            </app-field>

            </div>
          </mat-card>

          <h3 class="blue-header">APPLICANT INFORMATION</h3>
          <mat-card class="mat-elevation-z8" style="margin-bottom: 10px;"
          *ngIf="application?.applicationType?.showPropertyDetails">
          <p><strong>Please answer Yes or No to each of the following:</strong></p>
          <section style="display: flex; justify-content: space-between; width: 100%;">            
              <div style="flex: 0 0 85px;">
                  <mat-button-toggle-group  aria-label="Font Style">
                    <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                    <mat-button-toggle value="No">No</mat-button-toggle>
                  </mat-button-toggle-group>
                </div>
            <div class="question-label">
                The applicant is the owner of the business in respect of which the licence is to be issued or will become the owner before the licence is issued.
            </div>
          </section>
          <p>&nbsp;</p>
          <section style="display: flex;  width: 100%;">            
              <div style="flex: 0 0 85px;">
                  <mat-button-toggle-group  aria-label="Font Style">
                    <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                    <mat-button-toggle value="No">No</mat-button-toggle>
                  </mat-button-toggle-group>
                </div>
                <div class="question-label">
                    At the time of application, the applicant is:
                    <li style="margin-left:20px; padding-left:10px;">
                        The owner of or has an agreement to purchase the place or premises that will form the proposed establishment, or
                    </li>
                    <li style="margin-left:20px; padding-left:10px;">
                        The lessee or has a binding offer to lease the place or premises that will form the proposed establishment.
                    </li>
                </div>
          </section>
          <p>&nbsp;</p>
          <section style="display: flex; width: 100%;">            
              <div style="flex: 0 0 85px;">
                  <mat-button-toggle-group  aria-label="Font Style">
                    <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                    <mat-button-toggle value="No">No</mat-button-toggle>
                  </mat-button-toggle-group>
                </div>
                <div class="question-label">
                    At the time the licence is issued, the applicant will be:
                    <li style="margin-left:20px; padding-left:10px;">The owner of the place or premises that forms the establishment, or</li>
                    <li style="margin-left:20px; padding-left:10px;">The lessee of the place or premises that forms the establishment (term no less than 12 months).</li>
                </div>
          </section>
          </mat-card>
  
          <h3 class="blue-header">ESTABLISHMENT</h3>
          <section >

            <mat-card class="mat-elevation-z8" style="margin-bottom: 10px;"
            *ngIf="application?.applicationType?.showPropertyDetails">
            <div class="ngtest-new-address"
            *ngIf="showFormControl(application?.applicationType?.newEstablishmentAddress)">
     
            <app-field [label]="[ApplicationTypeNames.CRSTransferofOwnership, ApplicationTypeNames.CRSLocationChange].indexOf(application?.applicationType?.name) === -1 ? 'Establishment Name' : 'Name of the Proposed Establishment'"
            [required]="true" [valid]="isValidOrNotTouched('establishmentName')"
            errorMessage="{{form.get('establishmentName').errors && form.get('establishmentName').errors['forbiddenName'] ? 'The store name contains at least one word that doesn’t comply with naming requirements. The application can’t be submitted until the prohibited word(s) are removed.' : 'Establishment Name is a required field'}}">
            <input class="form-control" style="width: 500px;" type="text" id="establishmentName">
          </app-field>
      




            <address class="row">
              <app-field class="col-md-12 col-xs-12" label="Physical Address" [required]="true" [isFullWidth]="true"
                [valid]="isValidOrNotTouched('establishmentAddressStreet')"
                errorMessage="Please enter the street address">
                <input class="form-control" type="text" autocomplete="address-line1"
                  formControlName="establishmentAddressStreet" id="establishmentAddressStreet">
              </app-field>
              <app-field class="col-md-4 col-xs-12" label="City" [required]="true" [isFullWidth]="true"
                [valid]="isValidOrNotTouched('establishmentAddressCity')" errorMessage="Please enter the city">
                <input class="form-control" type="text" autocomplete="address-level2"
                  formControlName="establishmentAddressCity" id="establishmentAddressCity">
              </app-field>
              <section class="col-md-4 col-xs-12">
                <app-field label="Province" [isFullWidth]="true">
                  <input class="form-control" autocomplete="address-level1" readonly type="text"
                    value="British Columbia">
                </app-field>
              </section>
              <section class="col-md-4 col-xs-12">
                <app-field label="Postal Code" [required]="true" [isFullWidth]="true"
                  [valid]="isValidOrNotTouched('establishmentAddressPostalCode')"
                  errorMessage="Please enter the postal code">
                  <input class="form-control" type="text" autocomplete="postal-code"
                    formControlName="establishmentAddressPostalCode" id="establishmentAddressPostalCode">
                </app-field>
              </section>
              <app-field class="col-md-4 col-xs-12" label="Country" [isFullWidth]="true">
                <input class="form-control" autocomplete="country-name" readonly type="text" value="Canada">
              </app-field>
            </address>

            <div class="light-blue-bg" style="display: flex;">
              <div style="flex: 0 0 210px;">
                <app-field label="Parcel Identifier (PID)" [valid]="isValidOrNotTouched('establishmentParcelId')"
                  errorMessage="Please enter the Parcel Identifier (format: 9 digits)" [required]="true">
                  <input type="text" class="form-control" style="width: 200px;"
                    (keydown)="rejectIfNotDigitOrBackSpace($event)" maxlength=9 formControlName="establishmentParcelId" id="establishmentParcelId">
                </app-field>
              </div>
              <div style="flex: 1; font-size: 11px;">
                <span>

                  <span>
                    <i class="fas fa-exclamation-circle" style="margin-right: 10px;"></i>The property’s PID may be
                    found
                    on
                  </span> <br>
                  <ul style="display: inline-block">
                    <li>The title to the property</li>
                    <li>Through the B.C. Land Title and Survey Authority</li>
                    <li>The tax assessment notice from BC Assessment</li>
                  </ul>
                </span>

                <ul style="display: inline-block">
                  <li>BC Assessment’s e-valueBC website </li>
                  <li>The municipal tax notice</li>
                  <li>The property lease</li>
                </ul>
              </div>
            </div>
            
          </div>
        

          <!-- Store Contact Info -->
          <section *ngIf="showFormControl(application?.applicationType?.storeContactInfo)">
            <div style="flex: 0 0 210px;">
              <app-field label="Store Email" [required]="false" [valid]="isValidOrNotTouched('establishmentEmail')"
                errorMessage="Please enter an email address">
                <input type="text" class="form-control" style="width: 200px;" autocomplete="email"
                  [readonly]="application?.applicationType?.storeContactInfo === FormControlState.Reaonly"
                  formControlName="establishmentEmail" id="establishmentEmail">
              </app-field>
            </div>
            <div style="flex: 0 0 210px;">
              <app-field label="Store Phone" [required]="false" [valid]="isValidOrNotTouched('establishmentPhone')"
                errorMessage="Please enter a phone number ">
                <input type="text" class="form-control" style="width: 200px;" maxlength="10" autocomplete="tel"
                  [readonly]="application?.applicationType?.storeContactInfo === FormControlState.Reaonly"
                  (keydown)="rejectIfNotDigitOrBackSpace($event)" formControlName="establishmentPhone" id="establishmentPhone">
              </app-field>
            </div>
            
          </section>
          <p><strong>Please answer Yes or No to each of the following:</strong></p>
            <section style="display: flex; width: 100%;">            
                <div style="flex: 0 0 85px;">
                    <mat-button-toggle-group  aria-label="Font Style">
                      <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                      <mat-button-toggle value="No">No</mat-button-toggle>
                    </mat-button-toggle-group>
                  </div>
              <div class="question-label">
                  Is this location zoned for liquor service?
              </div>
            </section>
            <p>&nbsp;</p>
            <section style="display: flex;  width: 100%;">            
                <div style="flex: 0 0 85px;">
                    <mat-button-toggle-group  aria-label="Font Style">
                      <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                      <mat-button-toggle value="No">No</mat-button-toggle>
                    </mat-button-toggle-group>
                  </div>
                  <div class="question-label">
                      If the LP licence is issued, would you like mail sent to the establishment?
                  </div>
            </section>
            <p>&nbsp;</p>
            <section style="display: flex; width: 100%;">            
                <div style="flex: 0 0 85px;">
                    <mat-button-toggle-group  aria-label="Font Style">
                      <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                      <mat-button-toggle value="No">No</mat-button-toggle>
                    </mat-button-toggle-group>
                  </div>
                  <div class="question-label">
                      Will this establishment overlap a food primary licence (aka dual licence)?
                  </div>
            </section>
            <p>&nbsp;</p>
            <section style="display: flex; width: 100%;">            
                <div style="flex: 0 0 85px;">
                    <mat-button-toggle-group  aria-label="Font Style">
                      <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                      <mat-button-toggle value="No">No</mat-button-toggle>
                    </mat-button-toggle-group>
                  </div>
                  <div class="question-label">
                      Is your establishment a standalone patio with no interior seating?
                  </div>
            </section>
            </mat-card>

        </section>
      </section>

      <section *ngIf="application?.applicationType?.showDescription1">
        <h3 class="blue-header">DESCRIPTION OF CHANGE</h3>
        <div class="padded-section">
          <app-field label="Please briefly outline the  proposed change" [required]="true" [isFullWidth]="true"
            [showChevrons]="false" [valid]="isValidOrNotTouched('description1')"
            errorMessage="Please enter a description ">
            <textarea formControlName="description1" rows="8" style="width: 100%;" maxlength="5000"
              minlength="10" id="description1"></textarea>
          </app-field>
        </div>
      </section>

      <div class="ngtest-photo-signage" *ngIf="showFormControl(application?.applicationType?.signage)">
        <h3 class="blue-header">Additional Requirements and Information</h3>
        

      </div>

  

      <div class="ngtest-valid-interest" *ngIf="showFormControl(application?.applicationType?.validInterest)">
        <hr>
        <br>
        <label for="">Offer or Proof of Ownership, Lease or Sub-Lease</label>
        <br>
        <section *ngIf="application?.applicationType?.validInterest === FormControlState.Show">
          <app-more-less-content>
            <p less>
              If the applicant currently owns or leases the proposed store location, submit Option 1.
            </p>
            <div more>
              <p>
                If the applicant doesn't currently own or lease the proposed store location, submit Option 2.
              </p>
              <p>
                Leases or other arrangements must not expire for at least 12 months from the date the licence is issued
              </p>
              <p>
                Option 1: Submit a copy of the lease, sub-lease, or proof of ownership of the proposed store location.
              </p>
              <p>
                Option 2: Submit a copy of the offer to purchase, lease, or sub-lease the proposed store location. Note,
              </p>
              <p>
                Option 1 will be required before the licence is issued.
              </p>
            </div>
          </app-more-less-content>
        </section>

        <p *ngIf="application?.applicationType?.validInterest === FormControlState.Reaonly">
          The below offer or proof of ownership, lease or sub-lease is on file.
        </p>
        <section>
          <app-file-uploader *ngIf="applicationId" documentType="Valid Interest" fileTypes="FILE MUST BE IN PDF FORMAT."
            [enableFileDeletion]="application?.applicationType?.validInterest === FormControlState.Show"
            [multipleFiles]="false" entityName="application" [useDocumentTypeForName]="true"
            (numberOfUploadedFiles)="uploadedValidInterestDocuments = $event" [entityId]="applicationId"
            [uploadHeader]="'TO UPLOAD OWNERSHIP OR LEASE DOCUMENTS, DRAG FILES HERE OR'">
          </app-file-uploader>
        </section>
      </div>



      <!-- Hours of Sale -->
      <section class="ngtest-hours-of-sale" *ngIf="application?.applicationType?.showHoursOfSale">
        <h3 class="blue-header">Establishment Proposal</h3>

        <div class="padded-section">
            <br>
            <label for="">Proposed Service Areas</label>
          
          <p>Complete the following based on your establishment floor plan and occupant load. dentify each proposed service area (interior and exterior) where liquor will be sold, served or consumed.</p>
            <table class="store-hours">
                <tr>
                  <th class="lead">Area No.</th>
                  <th class="lead">Floor Level</th>
                  <th class="lead">Indoor</th>
                  <th class="lead">Outdoor</th>
                  <th class="lead">Occupant Load</th>
                </tr>
              
                <tr>
                  <td class="lead" style="text-align: center;">1.</td>
                  <td><input class="form-control" type="text"></td>
                  <td><input class="form-control" type="text"></td>
                  <td><input class="form-control" type="text"></td>
                  <td><input class="form-control" type="text"></td>
                </tr>
                <tr>
                    <td class="lead" style="text-align: center;">2.</td>
                    <td><input class="form-control" type="text"></td>
                    <td><input class="form-control" type="text"></td>
                    <td><input class="form-control" type="text"></td>
                    <td><input class="form-control" type="text"></td>
                  </tr>
                  <tr>
                      <td class="lead" style="text-align: center;">3.</td>
                      <td><input class="form-control" type="text"></td>
                      <td><input class="form-control" type="text"></td>
                      <td><input class="form-control" type="text"></td>
                      <td><input class="form-control" type="text"></td>
                    </tr>
                    <tr>
                        <td class="lead" style="text-align: center;">4.</td>
                        <td><input class="form-control" type="text"></td>
                        <td><input class="form-control" type="text"></td>
                        <td><input class="form-control" type="text"></td>
                        <td><input class="form-control" type="text"></td>
                      </tr>
                      <tr>
                          <td class="lead" style="text-align: center;">5.</td>
                          <td><input class="form-control" type="text"></td>
                          <td><input class="form-control" type="text"></td>
                          <td><input class="form-control" type="text"></td>
                          <td><input class="form-control" type="text"></td>
                        </tr>
                        <tr>
                            <td class="lead" style="text-align: right;" colspan='4'>Total Occupant Load (of all licensed areas):</td>
                            <td><input class="form-control" type="text"></td>
                          </tr>
              </table>

              <hr><br>
              <label for="">Hours of Liquor Service:</label>
        <p>Identify the start and end times of your proposed hours of liquor service for each day of the week.  You should request the maximum hours of liquor service that you are most likely to require.  If licensed, you may open or close at any time within the approved hours.  Maximum hours of liquor service permitted by the Branch are 9 AM to 4 AM.  Contact your LG/FN to ask about bylaws regarding operating hours.</p>
          
          <table class="store-hours">
            <tr>
              <th class="lead"></th>
              <th class="lead">Sunday</th>
              <th class="lead">Monday</th>
              <th class="lead">Tuesday</th>
              <th class="lead">Wednesday</th>
              <th class="lead">Thursday</th>
              <th class="lead">Friday</th>
              <th class="lead">Saturday</th>
            </tr>
            <tr>
              <th class="lead">Open</th>
              <td>
                <select class="form-control" formControlName="serviceHoursSundayOpen">
                  <option value=""> -- </option>
                  <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                </select>
              </td>
              <td>
                <select class="form-control" formControlName="serviceHoursMondayOpen">
                  <option value=""> -- </option>
                  <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                </select>
              </td>
              <td>
                <select class="form-control" formControlName="serviceHoursTuesdayOpen">
                  <option value=""> -- </option>
                  <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                </select>
              </td>
              <td>
                <select class="form-control" formControlName="serviceHoursWednesdayOpen">
                  <option value=""> -- </option>
                  <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                </select>
              </td>
              <td>
                <select class="form-control" formControlName="serviceHoursThursdayOpen">
                  <option value=""> -- </option>
                  <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                </select>
              </td>
              <td>
                <select class="form-control" formControlName="serviceHoursFridayOpen">
                  <option value=""> -- </option>
                  <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                </select>
              </td>
              <td>
                <select class="form-control" formControlName="serviceHoursSaturdayOpen">
                  <option value=""> -- </option>
                  <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                </select>
              </td>
            </tr>
            <tr>
              <th class="lead">Close</th>
              <td>
                <select class="form-control" formControlName="serviceHoursSundayClose">
                  <option value=""> -- </option>
                  <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                </select>
              </td>
              <td>
                <select class="form-control" formControlName="serviceHoursMondayClose">
                  <option value=""> -- </option>
                  <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                </select>
              </td>
              <td>
                <select class="form-control" formControlName="serviceHoursTuesdayClose">
                  <option value=""> -- </option>
                  <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                </select>
              </td>
              <td>
                <select class="form-control" formControlName="serviceHoursWednesdayClose">
                  <option value=""> -- </option>
                  <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                </select>
              </td>
              <td>
                <select class="form-control" formControlName="serviceHoursThursdayClose">
                  <option value=""> -- </option>
                  <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                </select>
              </td>
              <td>
                <select class="form-control" formControlName="serviceHoursFridayClose">
                  <option value=""> -- </option>
                  <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                </select>
              </td>
              <td>
                <select class="form-control" formControlName="serviceHoursSaturdayClose">
                  <option value=""> -- </option>
                  <option *ngFor="let item of ServiceHours" [value]="item">{{item}}</option>
                </select>
              </td>
            </tr>
          </table>
          <p class="error-states" *ngIf="showValidationMessages && !isHoursOfSaleValid()">Hours of Sale are required
          </p>
        </div>
      </section>


      <div class="ngtest-floor-plan" *ngIf="showFormControl(application?.applicationType?.floorPlan)">
          <hr><br>
          <label for="">Floor Plan</label>
          <br>
          <section *ngIf="application?.applicationType?.floorPlan === FormControlState.Show">
      
                  A floor plan is a document, showing a view from above, of the dimensions and relationships between
                  rooms, spaces and other physical features on each floor of a structure. The document must measure at
                  least 8.5" x 11" (standard letter size). A floor plan for each level of the establishment must be
                  submitted if the proposed establishment has more than one level. Either a hand-drawn or
                  computer-generated plan is acceptable, as long as the plan is drawn to scale and is clear and legible. A
                  floor plan must not be submitted on graph paper or paper with gridlines.

                <div style="display: flex; margin-top: 10px;">
                  <section>
                    The floor plan must be submitted at the time of application and it
                    must identify the proposed non-medical cannabis retail area(s) plus
                    the following interior features of the establishment:
                    <ul>
                      <li>Each room or area labeled with its intended use and dimensions;</li>
                      <li>Washrooms, stairs and elevators;</li>
                      <li>Entrances and exits (including those used by staff only);</li>
                      <li>Sales counter and cash register locations;</li>
                      <li>Furniture and fixture layout (e.g. shelves, display cases); and</li>
                      <li>Identify the security system and other physical security features that secure the store.</li>
                    </ul>
                  </section>
                  <img src="assets/floor-plan-example.png" width="300" alt="Floor plan"
                    style="margin: auto; display: block;">
                </div>

  
          </section>
          <p *ngIf="application?.applicationType?.floorPlan === FormControlState.Reaonly">
            The below offer or proof of ownership, lease or sub-lease is on file.
          </p>
          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Floor Plan" fileTypes="FILE MUST BE IN PDF FORMAT."
              [enableFileDeletion]="application?.applicationType?.floorPlan === FormControlState.Show"
              [multipleFiles]="true" entityName="application" [useDocumentTypeForName]="true"
              (numberOfUploadedFiles)="uploadedFloorPlanDocuments = $event" [entityId]="applicationId"
              [uploadHeader]="'TO UPLOAD FLOOR PLANS, DRAG FILES HERE OR'">
            </app-file-uploader>
          </section>
        </div>
        <br>
        <hr *ngIf="application?.applicationType?.name === ApplicationTypeNames.CRSStructuralChange">
        <mat-card *ngIf="application?.applicationType?.name === ApplicationTypeNames.CRSStructuralChange"
          class="mat-elevation-z0" style="margin-bottom: 10px;">
          <section style="display: flex; justify-content: space-between; width: 100%;">
            <div class="question-label">
              Does the proposed change involve a shared vestibule or changes to the entrances, exits or windows?
            </div>
            <div style="flex: 0 0 85px;">
              <mat-button-toggle-group [ngClass]="{'invalid': isTouchedAndInvalid('proposedChange')}"
                formControlName="proposedChange" aria-label="Font Style">
                <mat-button-toggle value="Yes">Yes</mat-button-toggle>
                <mat-button-toggle value="No">No</mat-button-toggle>
              </mat-button-toggle-group>
            </div>
          </section>
        </mat-card>
  
        <div class="ngtest-site-plan" *ngIf="showSitePlan()">
          <hr><br>
          <label for="">Site Plan</label>
          <br>
          <div *ngIf="application?.applicationType?.sitePlan === FormControlState.Show">

                <span>
                  A site plan is a document showing any existing and proposed building footprints, pathways of
                  travel, parking, and landscaping elements, and the surrounding area. The document must measure at least
                  8.5" x 11" (standard letter size). Either a hand-drawn or computer-generated plan is acceptable, as long
                  as the plan is drawn to scale and is clear and legible. A site plan must not be submitted on graph paper
                  or paper with gridlines.
                </span>
                <div class="row" style="margin-top: 10px;">
                  <div class="col-md-6">
                    <p>
                      The site plan must include the proposed store footprint and a representation of any interior or
                      exterior spaces surrounding the store, including:
                    </p>
  
                    <ul>
                      <li>The location of any other buildings/businesses on the same site, each building footprint, type
                        of businesses (e.g. gas station, office building) and building names, and their entrances and
                        exits</li>
                      <li>A description of the type of separation proposed (for any adjoining businesses)</li>
                      <li>Road access and exits, including any relevant street names</li>
                      <li>Parking lots.</li>
                    </ul>
                    <img src="assets/site-plan-example.png" width="350" alt="Site plan"
                      style="margin: auto; display: block;">
                  </div>
                  <div class="col-md-6">
                    <p>
                      If the proposed store is located inside a building with other businesses
                      (e.g. a mall), submit two site plans:
                    </p>
                    <p>
                      1) One site plan showing location of any other buildings/businesses on the same site, including:
                    </p>
                    <ul>
                      <li>Each building footprint, building name and a list of businesses operating inside the building
                      </li>
                      <li>Road access and exits, including any relevant street names, and</li>
                      <li>Parking lots</li>
                    </ul>
                    <p>
                      2) A second site plan showing the location of the proposed store
                      inside the building’s footprint:
                    </p>
                    <ul>
                      <li>All entrances and exits for the building</li>
                      <li>The location, name and type of businesses operating inside the building</li>
                      <li>The store footprint with all entrances and exits for the store, and</li>
                      <li>A description of the type of separation proposed for any business adjoining the proposed store
                      </li>
                    </ul>
                    <p>
                      Full height walls are required for separation and no connecting doors between the cannabis retail
                      store
                      and
                      the neighbouring business are permitted.
                    </p>
                    <p>
                      The cannabis retail store may share a vestibule with another type of business (e.g. a liquor store
                      or
                      grocery
                      store) provided each business has its own controlled entrance within the vestibule. The cannabis
                      retail
                      store
                      cannot share a vestibule with a business that would be contrary to public interest (i.e. business
                      aimed
                      at
                      minors or a liquor consumption business).
                    </p>
                  </div>
                </div>

          </div>
          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Site Plan" fileTypes="FILE MUST BE IN PDF FORMAT."
              [enableFileDeletion]="application?.applicationType?.sitePlan === FormControlState.Show"
              [multipleFiles]="true" entityName="application" [useDocumentTypeForName]="true"
              (numberOfUploadedFiles)="uploadedSitePlanDocuments = $event" [entityId]="applicationId"
              [uploadHeader]="'TO UPLOAD SITE PLAN DOCUMENTS, DRAG FILES HERE OR'">
            </app-file-uploader>
          </section>
        </div>

  
        <div>
          <hr>
          <label for="">Letter of Intent</label>
          <br>
          <section>
              <p>Provide a letter describing your proposed establishment.  Your letter must include:</p>
              
                <ul>
                  <li>Describe the primary focus of your business including any functions and services your establishment will provide if liquor service is not the primary business focus. </li>
                  <li>If liquor service is not the primary business focus (e.g. retail store or spa): identify the operating hours of your primary business and whether or not the business focus will shift to liquor service at a set time of day.</li>
                  <li>Identify all types of entertainment that may be offered in your establishment (e.g. films, darts, DJ booth, dance floor, exotic dancing, gambling, karaoke, live music, pool)</li>
                  <li>Describe the type of food service your establishment will offer.  Liquor primary establishments must provide, at a minimum, a variety of hot or cold snacks and non-alcoholic beverages during all hours of operation.</li>
                  <li>Describe the composition of the neighbourhood (e.g. commercial, residential, industrial).</li>
                  <li>Describe the potential for noise and other types of disturbance. </li>
                  <li>Describe the measures you will implement to ensure nearby residents are not disturbed by your establishment or patrons of your establishment. </li>
                  <li>Identify any requests for licensing options and/or endorsements</li>
                  <li>Include any other information that may be relevant to your application</li>
                </ul>
              

          </section>
  
          <section>
            <app-file-uploader *ngIf="applicationId" documentType="Letter of Interest"
              [enableFileDeletion]="true" [useDocumentTypeForName]="true"
              fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="true" entityName="application"
              [extensions]="['pdf']"
              [entityId]="applicationId"
              [uploadHeader]="'TO LETTER OF INTENT, DRAG FILES HERE OR'">
            </app-file-uploader>
          </section>
        </div>
      <!-- Licensed Producer -->
      <div *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
        <h3 class="blue-header">INFORMATION ABOUT THE LICENSED PRODUCER</h3>
        <section class="padded-section">
          <p>
            Which federally licensed producer(s) will the applicant represent in B.C.?
          </p>
          <app-field label="Name of Federal Producer " [required]="true" [valid]="true"
            errorMessage="Please enter the name of federal producer">
            <input class="form-control" formControlName="federalProducerNames" id="federalProducerNames" style="width: 350px;" type="text">
          </app-field>
        </section>
      </div>

      <!-- Connections to non-medical -->
      <section *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
        <h3 class="blue-header">CONNECTIONS TO NON-MEDICAL CANNABIS RETAIL STORE LICENSEES OR APPLICANTS</h3>
        <div class="padded-section" *ngIf="application?.tiedHouse && account?.businessType">
          <app-connection-to-non-medical-stores *ngIf="application?.tiedHouse" [tiedHouse]="application?.tiedHouse"
            licensedProducerText="B.C. non-medical cannabis retail store licensee or applicant"
            federalProducerText="licensee or applicant" [businessType]="account?.businessType"
            (value)="tiedHouseFormData = $event"></app-connection-to-non-medical-stores>
        </div>
      </section>

      <div class="ngtest-associate-upload" *ngIf="application?.applicationType?.showAssociatesFormUpload">
        <br>
        <hr>
        <label for="">Personal History Summary Form</label>
        <br>
        <i>
          Please download
          <a *ngIf="account?.businessType === 'SoleProprietor'"
            href="https://www2.gov.bc.ca/assets/download/A61C46EE12464E76BE9594B674CADB93" download target="_blank" rel="noopener noreferrer">
            and complete
          </a>
          <a *ngIf="account?.businessType === 'IndigenousNation'"
            href="https://www2.gov.bc.ca/assets/download/B98C3F6F56204AACB715C71D59249A3C" download target="_blank" rel="noopener noreferrer">
            and complete
          </a>
          <a *ngIf="account?.businessType === 'Society'"
            href="https://www2.gov.bc.ca/assets/download/44B8FA4AA8974880AA1A7392ACC1E406" download target="_blank" rel="noopener noreferrer">
            and complete
          </a>
          <a *ngIf="businessTypeIsPartnership()"
            href="https://www2.gov.bc.ca/assets/download/1002E9464D8349EC8894407AF057446B" download target="_blank" rel="noopener noreferrer">
            and complete
          </a>
          <a *ngIf=" businessTypeIsPrivateCorporation()"
            href="https://www2.gov.bc.ca/assets/download/1212A58A8CE34365BD566AB2B1382AD5" download target="_blank" rel="noopener noreferrer">
            and complete
          </a>
          &nbsp;the Associate Form.
        </i>
        <p>Upload the completed form below.</p>
        <section>
          <app-file-uploader *ngIf="applicationId" documentType="Licence Application Associates"
            fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false" entityName="application"
            (numberOfUploadedFiles)="uploadedAssociateDocuments = $event" [entityId]="applicationId"
            [uploadHeader]="'TO UPLOAD PERSONAL HISTORY FORM, DRAG FILE HERE OR'" #mainForm>
          </app-file-uploader>
        </section>
        <br>
      </div>


      <!-- Contact Details -->
      <h3 class="blue-header">APPLICATION CONTACT DETAILS</h3>
      <i *ngIf="application?.applicationType?.name !== ApplicationTypeNames.Marketer">
        The contact LCRB should communicate with regarding the application. The contact must be authorized to
        represent
        the applicant and have the authority to bind the applicant.
      </i>
      <div *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
        <i *ngIf="account?.businessType === 'SoleProprietor'">
          The contact LCRB should communicate with regarding the application
        </i>
        <i *ngIf="account?.businessType === 'Society'">
          The contact LCRB should communicate with regarding the application. The contact must be authorized to
          represent the applicant and have the authority to bind the applicant.
        </i>
        <i *ngIf="businessTypeIsPartnership()">
          The contact LCRB should communicate with regarding the application. The contact must be authorized to
          represent the applicant and have the authority to bind the applicant.
        </i>
        <i *ngIf="account?.businessType !== 'PublicCorporation'">
          The contact must be authorized to represent the applicant and have the authority to bind the applicant.
        </i>
        <i *ngIf="businessTypeIsPrivateCorporation()">
          The contact LCRB should communicate with regarding the application. The contact must be authorized to
          represent the applicant and have the authority to bind the applicant.
        </i>
      </div>
      <address class="padded-section">

        <app-field label="First Name" [required]="true" [valid]="isValidOrNotTouched('contactPersonFirstName')"
          errorMessage="Please enter the business contact's first name">
          <input class="form-control" style="width: 350px;" type="text" autocomplete="given-name"
            formControlName="contactPersonFirstName" id="contactPersonFirstName">
        </app-field>

        <app-field label="Last Name" [required]="true" [valid]="isValidOrNotTouched('contactPersonLastName')"
          errorMessage="Please enter the business contact's last name">
          <input class="form-control" style="width: 350px;" type="text" autocomplete="family-name"
            formControlName="contactPersonLastName" id="contactPersonLastName">
        </app-field>

        <app-field label="Title/ Position" [required]="false" [valid]="true">
          <input class="form-control" style="width: 350px;" type="text" formControlName="contactPersonRole">
        </app-field>

        <app-field label="Phone Number (main)" [required]="true" [valid]="isValidOrNotTouched('contactPersonPhone')"
          errorMessage="Please enter the business contact's 10-digit phone number">
          <input class="form-control" style="width: 250px;" maxlength="10" autocomplete="tel"
            (keydown)="rejectIfNotDigitOrBackSpace($event)" type="text" formControlName="contactPersonPhone">
        </app-field>

        <app-field label="Email" [required]="true" [valid]="isValidOrNotTouched('contactPersonEmail')"
          errorMessage="Please enter the business contact's email address"
          afterLabelText="By submitting the email address, you agree that the Liquor and Cannabis Regulation Branch can use it to communicate with you about your application.">
          <input class="form-control" style="width: 350px;" type="text" autocomplete="email"
            formControlName="contactPersonEmail" id="contactPersonEmail" (blur)="trimValue(form.get('contactPersonEmail'))">
        </app-field>
      </address>  


      <h3 class="blue-header ngtest-declarations" *ngIf="application?.applicationType?.showDeclarations">
        DECLARATIONS
      </h3>
      <div class="padded-section" *ngIf="application?.applicationType?.showDeclarations">
        <section>
          <div *ngIf="application?.applicationType?.name !== ApplicationTypeNames.Marketer">
            The application must only be submitted by an individual with the authority to bind the applicant. The
            branch
            relies on the applicant to ensure that the individual who submits this application is authorized to do
            so.
            Typically, an appropriate individual in a corporation will be a duly authorized signatory who will
            usually
            be
            an officer or, in some cases, a director
          </div>
          <div *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
            <p *ngIf="account?.businessType === 'SoleProprietor'">
              This application should be submitted the sole proprietor.
            </p>
            <p *ngIf="account?.businessType === 'Society'">
              This application must only be submitted by an individual with the authority to bind the applicant. The
              branch relies on the applicant to ensure that the individual who submits this application is
              authorized to
              do so. Typically, an appropriate individual for a society will be a director or a senior manager (as
              defined in the Societies Act).
            </p>
            <p *ngIf="account?.businessType === 'PublicCorporation'">
              This application must only be submitted by an individual with the authority to bind the applicant. The
              branch relies on the applicant to ensure that the individual who submits this application is
              authorized to
              do so. Typically, an appropriate individual in a corporation will be a duly authorized signatory who
              will
              usually be an officer or, in some cases, a director.
            </p>
            <div *ngIf="businessTypeIsPartnership()">
              <p>
                This application must only be submitted by an individual with the authority to bind the applicant.
                The
                branch relies on the applicant to ensure that the individual who submits this application is
                authorized
                to do so. Typically, an appropriate individual will be as follows:
              </p>
              <ul>
                <li>If the applicant is a general partnership, one of the general partners</li>
                <li>If the applicant is a limited partnership, the general partner of the partnership</li>
              </ul>
            </div>
            <p *ngIf="businessTypeIsPrivateCorporation()">
              The application must only be submitted by an individual with the authority to bind the applicant. The
              branch relies on the applicant to ensure that the individual who submits this application is
              authorized to
              do so. Typically, an appropriate individual in a corporation will be a duly authorized signatory who
              will
              usually be an officer or, in some cases, a director.
            </p>

          </div>

        </section>





        <app-field [valid]="!showValidationMessages || form.get('authorizedToSubmit').valid"
          errorMessage="Please affirm that you are authorized to submit the application." [showChevrons]="false">
          <section style="display: flex">
            <input type="checkbox" formControlName="authorizedToSubmit" id="authorizedToSubmit">
            <span class="error-states">*</span>
            <div style="padding-left: 10px;"> I understand and affirm that I am authorized to submit the application
            </div>
          </section>
        </app-field>
        <p>
          Section 22(2) of the Cannabis Control and Licensing Act states: “A person must not submit to the general
          manager
          an application, or
          information or a record included as part of the application, that contains false or misleading
          information, or
          fails to disclose a material fact”.
        </p>
        <app-field [valid]="!showValidationMessages || form.get('signatureAgreement').valid"
          errorMessage="Please affirm that all of the information provided for this application is true and complete."
          [showChevrons]="false">
          <section style="display: flex">
            <input type="checkbox" formControlName="signatureAgreement" id="signatureAgreement">
            <span class="error-states">*</span>
            <div style="padding-left: 10px;"> I understand and affirm that all of the information provided for this
              application is true and complete
            </div>
          </section>
        </app-field>
      </div>

      <p>Proceed to pay online using a credit card through the secure web portal.</p>

      <p>
        <i>
          <b>Please note:</b> Applications which are submitted without all required information or documents will
          not be
          processed. Applicants will be contacted and provided the opportunity to submit missing information. Once
          applicants provide all required documents to the LCRB, the application will be processed.
        </i>
      </p>

      <section class="error" *ngIf="showValidationMessages">
        <p *ngFor="let message of validationMessages">
          <span class="app-cancel">
            <mat-icon aria-label="error icon" style="font-size: 15px;">error</mat-icon>
            {{message}}
          </span>
        </p>
      </section>

      <div class="light-blue-bg">
        <p *ngIf="application?.applicationType?.name !== ApplicationTypeNames.Marketer">
          The Province does not know how many application for a cannabis retail store licence will be received.
          Therefore, it is difficult to predict how long applications will take to process. To minimize delays in
          processing, applicants must make sure the application is complete before submitting it.
        </p>
        <p *ngIf="application?.applicationType?.name === ApplicationTypeNames.Marketer">
          The Province does not know how many applications for a cannabis marketing licence will be received.
          Therefore,
          it is difficult to predict how long applications will take to process. To minimize delays in processing,
          applicants must make sure the application is complete before submitting it.
        </p>
        <br>
        <p>
          The ‘save for later’ feature allows applicants to re-access an application in progress. Please be advised
          that
          once an application is submitted, you will be unable to upload additional documentation. For questions on
          the
          LCRB application process, please contact: <a href="javascript: void(0);">lcrbcannabis@gov.bc.ca</a>.
        </p>
      </div>

      <section style="position: relative; margin-top: 20px;">
        <button class="btn btn-primary" style="margin-right:10px;" (click)="router.navigate(['/dashboard'])">
          <span>
            <i class="fa fa-save" style="color: #fff;"></i>
            DOWNLOAD LG/IN FORM PACKAGE
          </span>
        </button>
        <button class="btn btn-primary" (click)="submit_application()">SUBMIT &amp; PAY</button>
        <span style="float: right; color: #1a5a96; padding-top: 10px;">
          <span (click)="cancelApplication()">
            <i class="fas fa-trash-alt" style="color: #1a5a96;"></i>
            <a href="javascript: void(0)" id="cancelApp">
              Cancel Application
            </a>
          </span>
        </span>

        <div [ngBusy]="busy"></div>
      </section>
    </div>
  </div>

  <div [ngClass]="{'normal-mode': mode !== UPLOAD_FILES_MODE}">
    <div [formGroup]="form" style="padding-left: 45px; position: relative">
      <div [ngBusy]="busy"></div>
      <h1 *ngIf="application">Add More files to the Application</h1>
    </div>
    <div *ngIf="application" class="application-wrapper">
      <label for="">Establishment Name</label>:
      <span style="color: #1a5a96;">{{form.controls['establishmentName'].value}}</span>
      <br>

      <div *ngIf="application?.applicationType?.name !== ApplicationTypeNames.CRSLocationChange">

        <label for="">Associates Form</label>
        <br>
        <i>
          Please download
          <a *ngIf="account?.businessType === 'SoleProprietor'"
            href="https://www2.gov.bc.ca/assets/download/A61C46EE12464E76BE9594B674CADB93" download target="_blank" rel="noopener noreferrer">
            and complete
          </a>
          <a *ngIf="account?.businessType === 'Society'"
            href="https://www2.gov.bc.ca/assets/download/44B8FA4AA8974880AA1A7392ACC1E406" download target="_blank" rel="noopener noreferrer">
            and complete
          </a>
          <a *ngIf="businessTypeIsPartnership()"
            href="https://www2.gov.bc.ca/assets/download/1002E9464D8349EC8894407AF057446B" download target="_blank" rel="noopener noreferrer">
            and complete
          </a>
          <a *ngIf=" businessTypeIsPrivateCorporation()"
            href="https://www2.gov.bc.ca/assets/download/1212A58A8CE34365BD566AB2B1382AD5" download target="_blank" rel="noopener noreferrer">
            and complete
          </a>
          &nbsp;the Associate Form..
        </i>
        <p>Upload the completed form below.</p>
        <section>
          <app-file-uploader *ngIf="applicationId" documentType="Licence Application Associates"
            fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false" entityName="application"
            (numberOfUploadedFiles)="uploadedAssociateDocuments = $event" [enableFileDeletion]="false"
            [entityId]="applicationId" [uploadHeader]="'TO UPLOAD ASSOCIATE FORM, DRAG FILE HERE OR'" #mainForm>
          </app-file-uploader>
        </section>
        <br>
        <hr>
        <br>

        <label for="">Financial Integrity Form</label>
        <br>
        <i>
          Please download <a href="https://www2.gov.bc.ca/assets/download/E840994D9D304AFE8D56A50666281B9D" download
            target="_blank" rel="noopener noreferrer">and complete</a> the financial integrity form.
        </i>
        <p>Upload the completed form below.</p>
        <section>
          <app-file-uploader *ngIf="applicationId" documentType="Licence Application Financial Integrity"
            fileTypes="FILE MUST BE IN PDF FORMAT." [multipleFiles]="false" entityName="application"
            (numberOfUploadedFiles)="uploadedFinancialIntegrityDocuments = $event" [enableFileDeletion]="false"
            [entityId]="applicationId" [uploadHeader]="'TO UPLOAD FINANCIAL INTEGRITY FORM, DRAG FILE HERE OR'"
            #financialIntegrityDocuments>
          </app-file-uploader>
        </section>
        <br>
        <hr>
      </div>
      <label for="">Supporting Documents</label>
      <br>
      <p *ngIf="application?.applicationType?.name !== ApplicationTypeNames.Marketer">Please download the
          <span *ngIf=" application?.applicationType?.name !== ApplicationTypeNames.CRSTransferofOwnership">
            <a *ngIf="account?.businessType === 'SoleProprietor'"
              href="https://www2.gov.bc.ca/assets/download/EEC8AD886FA04CD48D78FD22A375A7D8" download target="_blank" rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf="account?.businessType === 'Society'"
              href="https://www2.gov.bc.ca/assets/download/8FFCF0DA701842F99D4A80F05174A71A" download target="_blank" rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf="account?.businessType === 'IndigenousNation'"
              href="https://www2.gov.bc.ca/assets/download/87A1FB955AD64660BAC4BF2462226E67" download target="_blank" rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf="businessTypeIsPartnership()"
              href="https://www2.gov.bc.ca/assets/download/13ADA5B32E4242568DB2B72E3566A56D" download target="_blank" rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf=" businessTypeIsPrivateCorporation()"
              href="https://www2.gov.bc.ca/assets/download/9D237C8721B1475FB95534037AE21829" download target="_blank" rel="noopener noreferrer">
              Document Checklist
            </a>
          </span>
          <span *ngIf=" application?.applicationType?.name === ApplicationTypeNames.CRSTransferofOwnership">
            <a *ngIf="account?.businessType === 'SoleProprietor'"
              href="https://www2.gov.bc.ca/assets/download/31016E1B36664641921A914DAD28D894" download target="_blank" rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf="account?.businessType === 'Society'"
              href="https://www2.gov.bc.ca/assets/download/9CC0BA56735E466AB09FEAEE3241F46C" download target="_blank" rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf="account?.businessType === 'IndigenousNation'"
              href="https://www2.gov.bc.ca/assets/download/31016E1B36664641921A914DAD28D894" download target="_blank" rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf="businessTypeIsPartnership()"
              href="https://www2.gov.bc.ca/assets/download/9A8C9C2E49564C54A2232E60F5B266DB" download target="_blank" rel="noopener noreferrer">
              Document Checklist
            </a>
            <a *ngIf=" businessTypeIsPrivateCorporation()"
              href="https://www2.gov.bc.ca/assets/download/31016E1B36664641921A914DAD28D894" download target="_blank" rel="noopener noreferrer">
              Document Checklist
            </a>
          </span>
          <span *ngIf="application?.applicationType?.name !== ApplicationTypeNames.CRSLocationChange">and assemble
            all
            required documents.</span>
          <span *ngIf="application?.applicationType?.name === ApplicationTypeNames.CRSLocationChange">and assemble
            all
            required documents listed in the 'Documents
            Related to the Proposed Store' section.</span>
        </p>
      <section *ngIf="ApplicationTypeNames.Marketer === application?.applicationType?.name">
        <p *ngIf="account?.businessType === 'Society'">
          Please upload the society’s Statement of Directors and Registered Office.
        </p>
        <!-- <p *ngIf="account?.businessType === 'PublicCorporation'">
          Please upload the society’s Statement of Directors and Registered Office.
        </p> -->
        <p *ngIf="businessTypeIsPartnership()">
          Please upload the Partnership Agreement.
        </p>
        <div *ngIf="businessTypeIsPrivateCorporation()">
          <p>Please upload: </p>
          <ul>
            <li>Notice of Articles</li>
            <li>Central Securities Register</li>
          </ul>
        </div>

      </section>
      <section>
        <app-file-uploader *ngIf="applicationId" documentType="Licence Application Supporting"
          fileTypes="FILES MUST BE IN PDF, JPEG, OR PNG FORMAT." entityName="application" [entityId]="applicationId"
          [maxNumberOfFiles]="200" (numberOfUploadedFiles)="uploadedSupportingDocuments = $event"
          [extensions]="['pdf', 'jpg', 'jpeg', 'png']" [enableFileDeletion]="false" #supportingDocuments>
        </app-file-uploader>
      </section>
      <br>
      <hr>
    </div>
  </div>
</ng-template>

<ng-template #indigenousContent>
  <section class="large-screen-only">
    <h3 class="blue-header" style="margin-top: 0; margin-bottom: 0">INDIGENOUS NATION</h3>

    <div [formGroup]="form" class="submitted-content"
      style="background-color: #F1F4FA; border-bottom: 4px solid #E4E4E4">
      <app-field label="Is this application for an Indigenous Nation?" [valid]="true">
        <mat-button-toggle-group formControlName="applyAsIndigenousNation" aria-label="Font Style">
          <mat-button-toggle [value]="true">Yes</mat-button-toggle>
          <mat-button-toggle [value]="false">No</mat-button-toggle>
        </mat-button-toggle-group>
      </app-field>

      <div *ngIf="form.get('applyAsIndigenousNation').value" style="margin-top: 10px; margin-bottom: 10px;">
        Third party agents or consultants cannot apply on behalf of an Indigenous nation. The application and all
        supporting documents will be connected to the BCeID used at log-in.
      </div>

      <app-field label="Select the Indigenous nation" [valid]="isValidOrNotTouched('indigenousNationId')"
        *ngIf="form.get('applyAsIndigenousNation').value" errorMessage="Please select the Indigenous nation">
        <select class="form-control" formControlName="indigenousNationId" style="width: 250px;">
          <option value=""></option>
          <option [value]="item.id" *ngFor="let item of indigenousNations">{{item.name}}</option>
        </select>
      </app-field>
    </div>
  </section>
  <app-associate-content [account]="account" [showBothContents]="false"
    [isIndigenousNation]="form.get('applyAsIndigenousNation').value"></app-associate-content>
</ng-template>

<div class="dashboard-spacing" style="position: relative" appRemoveIfFeatureOff="IndigenousNation">
  <div [ngBusy]="busy"></div>
  <div class="row">
    <div class="col-md-7 col-sm-12">
      <ng-container *ngTemplateOutlet="applicationContent"></ng-container>
    </div>
    <div class="col-md-4 col-sm-12"
      *ngIf="application?.applicationType?.name === ApplicationTypeNames.CannabisRetailStore">
      <h1>&nbsp;</h1>
      <ng-container *ngTemplateOutlet="indigenousContent"></ng-container>
    </div>
  </div>
</div>

<div appRemoveIfFeatureOn="IndigenousNation">
  <div [ngBusy]="busy"></div>
  <ng-container *ngTemplateOutlet="applicationContent">
  </ng-container>
</div>
